---
import { Image } from "astro:assets";
import logoPreico from "@assets/images/logoPreico.png";

const menuItems = [
  { title: "INICIO", sub: "", href: "/" },
  { title: "USURA", sub: "En créditos", href: "/usura-creditos" },
  { title: "USURA", sub: "En vehículos", href: "/usura-vehiculos" },
  { title: "LEY DE SEGUNDA OPORTUNIDAD", sub: "", href: "/lso" },
  { title: "CONTACTO", sub: "Preico Consulting", href: "/contacto" },
  { title: "BLOG", sub: "Noticias", href: "/blog" },
];
---

<header
  class="sticky top-0 w-full bg-[#061a1f] text-white z-50 shadow-lg border-b border-[#8bbf47]"
>
  <nav
    class="max-w-7xl mx-auto relative flex items-center justify-between px-6 py-3"
  >
    <!-- Logo -->
    <a
      href="/"
      class="transition-transform hover:scale-105 duration-300 relative z-10"
    >
      <Image
        src={logoPreico}
        alt="Preico Jurídicos"
        width={100}
        height={100}
        class="w-20 h-auto object-contain"
      />
    </a>

    <!-- Desktop Menu -->
    <ul
      class="hidden lg:flex items-center justify-center absolute inset-x-0 top-1/2 -translate-y-1/2 pointer-events-none z-0"
    >
      {
        menuItems.map((item) => (
          <li class="pointer-events-auto mx-4 max-w-36">
            <a
              href={item.href}
              class="relative group flex flex-col items-center justify-center px-2 py-1"
            >
              <span class="text-xs font-bold uppercase tracking-widest leading-none mb-0.5">
                {item.title}
              </span>

              {item.sub && (
                <span class="text-xs text-gray-300 font-light uppercase tracking-wide leading-none">
                  {item.sub}
                </span>
              )}

              <span class="absolute bottom-0 left-0 w-0 h-[2px] bg-yellow-400 transition-all duration-300 ease-out group-hover:w-full" />
            </a>
          </li>
        ))
      }

      <!-- Client Area -->
      <li class="absolute right-6 pointer-events-auto">
        <a
          href="/auth/registro"
          class="relative group flex flex-col items-end px-2 py-1"
        >
          <span
            class="text-xs font-bold uppercase tracking-widest leading-none mb-0.5"
            >ÁREA CLIENTE</span
          >
          <span
            class="text-xs text-gray-300 font-light uppercase tracking-wide leading-none"
            >Iniciar sesión</span
          >
          <span
            class="absolute bottom-0 right-0 w-0 h-[2px] bg-yellow-400 transition-all duration-300 ease-out group-hover:w-full"
          ></span>
        </a>
      </li>
    </ul>

    <!-- Mobile Menu Toggle -->
    <button
      id="mobile-menu-btn"
      class="lg:hidden text-white focus:outline-none ml-auto relative z-10"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-8 w-8"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>

    <!-- Mobile Menu -->
    <div
      id="mobile-menu"
      class="absolute top-full left-0 w-full bg-[#061a1f] border-t border-[#8bbf47] shadow-lg lg:hidden flex-col items-center gap-6 z-40
        max-h-0 overflow-hidden opacity-0 translate-y-4
        transition-all duration-300 ease-out
        [&.open]:max-h-[600px]
        [&.open]:opacity-100
        [&.open]:translate-y-0
        [&.open]:py-6"
    >
      {
        menuItems.map((item) => (
          <div class="flex justify-center mb-2">
            <a href={item.href} class="text-center group ">
              <span class="block text-sm font-bold uppercase tracking-widest group-hover:text-yellow-400 transition-colors">
                {item.title}
              </span>
              {item.sub && (
                <span class="block text-xs text-gray-400 font-light uppercase group-hover:text-gray-200 transition-colors">
                  {item.sub}
                </span>
              )}
            </a>
          </div>
        ))
      }

      <div class="my-3"></div>

      <a href="/auth/registro" class="text-center group">
        <span
          class="block text-sm font-bold uppercase tracking-widest text-yellow-400 group-hover:text-white transition-colors"
          >ÁREA CLIENTE</span
        >
        <span
          class="block text-xs text-gray-300 font-light uppercase group-hover:text-white transition-colors"
          >Iniciar sesión</span
        >
      </a>
    </div>
  </nav>
</header>

<script>
  const btn = document.getElementById("mobile-menu-btn");
  const menu = document.getElementById("mobile-menu");

  btn?.addEventListener("click", () => {
    menu?.classList.toggle("open");
  });
</script>
